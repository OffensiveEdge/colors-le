# Colors-LE Internationalization (I18N) Guide

## Goals and philosophy

- Inclusive by default: all user‑facing text is localizable.
- Privacy‑first and offline: no network calls; translations ship with the extension.
- Predictable keys: two namespaces — `manifest.*` for `package.json` UI and `runtime.*` for in‑code strings.
- Safe fallbacks: English is bundled and used when a key or locale is missing.
- Translator‑friendly: consistent placeholders, small focused sentences, and a source `language.json` catalogue.

Non‑goals:
- Remote translation fetching or telemetry.
- Complex runtime pluralization logic. We use positional `{0}` placeholders with `vscode-nls`.

---

## File layout

```
src/i18n/
  package.nls.json          # Base English strings for package.json
  runtime.json              # Runtime strings for in-code messages
  package.nls.de.json       # German translations
  package.nls.es.json       # Spanish translations
  package.nls.fr.json       # French translations
  package.nls.id.json       # Indonesian translations
  package.nls.it.json       # Italian translations
  package.nls.ja.json       # Japanese translations
  package.nls.ko.json       # Korean translations
  package.nls.ru.json       # Russian translations
  package.nls.uk.json       # Ukrainian translations
  package.nls.vi.json       # Vietnamese translations
  package.nls.zh-cn.json    # Chinese (Simplified) translations
```

---

## Key namespaces

### `manifest.*` keys (package.json UI)

Used for VS Code extension manifest strings:

```json
{
  "manifest.ext.name": "Colors-LE",
  "manifest.ext.description": "Zero Hassle Color Extraction from CSS, SCSS, Tailwind, Design Tokens, and More",
  "manifest.command.category": "Colors-LE",
  "manifest.command.extract.title": "Extract Colors",
  "manifest.command.dedupe.title": "Deduplicate Colors",
  "manifest.command.sort.title": "Sort Colors",
  "manifest.command.analyze.title": "Analyze Colors",
  "manifest.settings.title": "Colors-LE Settings"
}
```

### `runtime.*` keys (in-code messages)

Used for dynamic messages, errors, and user feedback:

```json
{
  "runtime.extract.no-editor": "No active editor found",
  "runtime.extract.progress": "Extracting colors...",
  "runtime.extract.success": "Extracted {0} colors",
  "runtime.error.parsing": "Parsing error",
  "runtime.error.validation": "Validation error"
}
```

---

## Usage in code

### Package.json localization

Reference keys in `package.json` using `%key%` syntax:

```json
{
  "commands": [
    {
      "command": "colors-le.extractColors",
      "title": "%manifest.command.extract.title%",
      "category": "%manifest.command.category%"
    }
  ],
  "configuration": {
    "title": "%manifest.settings.title%",
    "properties": {
      "colors-le.enabled": {
        "description": "%manifest.settings.enabled.desc%"
      }
    }
  }
}
```

### Runtime localization

Use `vscode-nls` for runtime messages:

```typescript
import * as nls from 'vscode-nls'

const localize = nls.config({ messageFormat: nls.MessageFormat.file })()

// Simple message
const message = localize('runtime.extract.no-editor', 'No active editor found')

// Message with parameters
const successMessage = localize('runtime.extract.success', 'Extracted {0} colors', count)

// Error message
const errorMessage = localize('runtime.error.parsing', 'Parsing error: {0}', errorDetails)
```

---

## Translation guidelines

### Key naming conventions

- Use descriptive, hierarchical names: `manifest.settings.extraction.includeComments.desc`
- Keep keys under 50 characters when possible
- Use consistent terminology across all translations
- Group related keys together

### Message formatting

- Use `{0}`, `{1}`, `{2}` for positional parameters
- Keep messages concise and clear
- Avoid technical jargon when possible
- Use consistent punctuation and capitalization

### Example translation

**English (base)**:
```json
{
  "manifest.settings.extraction.includeComments.desc": "Include colors found in comments and documentation",
  "runtime.extract.success": "Extracted {0} colors from {1} file"
}
```

**German translation**:
```json
{
  "manifest.settings.extraction.includeComments.desc": "Farben in Kommentaren und Dokumentation einbeziehen",
  "runtime.extract.success": "{0} Farben aus {1} Datei extrahiert"
}
```

---

## Adding new translations

### 1. Add keys to base files

Add new keys to `src/i18n/package.nls.json` and `src/i18n/runtime.json`:

```json
{
  "manifest.settings.newFeature.desc": "Description of new feature",
  "runtime.newFeature.success": "New feature completed successfully"
}
```

### 2. Update package.json

Reference the new keys in `package.json`:

```json
{
  "configuration": {
    "properties": {
      "colors-le.newFeature": {
        "description": "%manifest.settings.newFeature.desc%"
      }
    }
  }
}
```

### 3. Use in code

Add runtime usage:

```typescript
const message = localize('runtime.newFeature.success', 'New feature completed successfully')
```

### 4. Add translations

Create or update translation files for each supported language:

```json
{
  "manifest.settings.newFeature.desc": "Beschreibung der neuen Funktion",
  "runtime.newFeature.success": "Neue Funktion erfolgreich abgeschlossen"
}
```

---

## Testing translations

### Local testing

1. Set VS Code locale: `Ctrl+Shift+P` → "Configure Display Language"
2. Restart VS Code
3. Test extension functionality
4. Verify all strings are translated

### Translation validation

- Check for missing keys in translation files
- Verify parameter placeholders match between languages
- Test with different locales and fallback scenarios
- Ensure consistent terminology across all languages

---

## Future enhancements

### Planned features

- **Portuguese (Brazil) support**: `package.nls.pt-br.json`
- **Additional languages**: Based on user demand and community contributions
- **Translation validation**: Automated checks for missing keys and parameter mismatches
- **Community contributions**: Guidelines for external translation contributions

### Contributing translations

1. Fork the repository
2. Add translation files for your language
3. Test thoroughly with the target locale
4. Submit a pull request with translation files and test results

---

## Troubleshooting

### Common issues

**Missing translations**
- Check that translation files are in the correct location
- Verify key names match exactly between base and translation files
- Ensure VS Code is restarted after adding new translations

**Parameter mismatches**
- Verify `{0}`, `{1}`, etc. placeholders are consistent
- Test with different parameter values
- Check for proper escaping of special characters

**Fallback behavior**
- English strings are used when translations are missing
- Check VS Code locale settings
- Verify translation files are properly formatted JSON

### Debug tips

- Use VS Code Developer Tools to inspect localized strings
- Check the Output panel for i18n-related errors
- Test with different VS Code locales to verify fallback behavior
- Use browser dev tools to inspect DOM for localized content
